<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mobio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/style.css') }}">
</head>

<body>

  <div class="sidebar pt-4 active">
    <div class="logo_content py-3">
      <div class="logo ps-2">
        <img src="{{ url_for('static', filename='assets/images/logo.jpg') }}" alt="" width="160" height="140">
      </div>
      <i class='bx bx-menu text-dark d-ml-none' id="btn"></i>
    </div>
    <ul class="nav_list border-t-1">
      <li>
        <a href="{{ url_for('get_chat_history') }}">
          <i class='bx bx-grid-alt'></i>
          <span class="links_name">Chat History</span>
        </a>
        <span class="tooltip">Chat History</span>
      </li>
      <li>
        <a href="{{ url_for('send_msg') }}" class="active-link">
          <i class='bx bx-envelope'></i>
          <span class="links_name">Send Message</span>
        </a>
        <span class="tooltip">Send Message</span>
      </li>
      <li>
        <a href="{{ url_for('settingAdmin') }}">
          <i class='bx bx-cog'></i>
          <span class="links_name">Setting</span>
        </a>
        <span class="tooltip">Setting</span>
      </li>
      <li>
        <a href="{{ url_for('reportPage') }}">
          <i class='bx bx-comment'></i>
          <span class="links_name">Report</span>
        </a>
        <span class="tooltip">Report</span>
      </li>
    </ul>
    <div class="content">
      <div class="user">
        <div class="user_details d-flex align-items-center justify-content-center">
          <a href="" class="nav-link">
            <i class="bx bx-help-circle pe-2"></i>
            <span>Help</span>
          </a>
        </div>
      </div>
    </div>
  </div>


  <div class="home_content p-0">

    <!-- navbar starts -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top d-flex">
      <a href="{{ url_for('logout') }}" class="txt-red d-flex justify-content-center align-items-center nav-link float-right">
        <i class="bx bx-log-out pe-2"></i>
        <span>Logout</span>
      </a>
    </nav>
    <!-- navbar ends -->

    <!-- Main Content Starts -->
    <main class="p-4 px-5">

      <div class="heading d-flex justify-content-between align-items-center">
        <h3>Send Message</h3>
        <button href="" class="btn btn-report">Report</button>
      </div>
      <div class="searchBar">
        <div class="row">
          <div class="col-md-2">
            <h4>Recipient</h4>
          </div>
          <div class="col-md-10">
            <form class="d-flex">
              <button class="btn btn-outline-light text-dark" type="submit">
                <i class="bx bx-search"></i>
              </button>
              <input class="form-control" type="search" placeholder="Search here" aria-label="Search">
            </form>
          </div>
        </div>
      </div>


      <div class="tag-container"></div>
      <form action="{{ url_for('send_msg') }}" method="post" enctype="multipart/form-data">
        <div class="tags">
          <div class="card">
            <div class="card-header">
              <input type="checkbox" id="parent-checkbox">
              <p>Select All</p>
            </div>
            <div class="card-body">
              {% for user in users %}
              <p>
                <input type="checkbox" class="child-checkbox" value="{{ user.whatsapp_number }}" name="event"><span>s{{ user.whatsapp_number }}</span>
              </p>
              {% endfor %}
            </div>
          </div>
        </div>


        <div id="editor" class="mt-4">
            <div class="form-group">
              <label for="msg">Message</label>
              <textarea name="message" class="form-control mt-2 border-none" id="msg" rows="10"></textarea>
            </div>
            <div class="form-group my-4">
              <label for="file">File</label>
              <input type="file" name="file" id="file" class="form-control">
            </div>
            <div class="text-center">
              <button class="btn w-25 text-light ck-btn">Submit</button>
            </div>
        </div>
      </form>


    </main>
    <!-- Main Content Ends -->
  </div>

  <script src="main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"
    integrity="sha512-fD9DI5bZwQxOi7MhYWnnNPlvXdp/2Pj3XSTRrFs5FQa4mizyGLnJcN6tuvUS6LbmgN1ut+XGSABKvjN0H6Aoow=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>

  <script>
    let btn = document.querySelector("#btn");
    let sidebar = document.querySelector(".sidebar");

    btn.onclick = function () {
      sidebar.classList.toggle("active");
    }


    $(document).ready(function () {
      // Add tag when a child checkbox is checked
      $('.child-checkbox').on('change', function () {
        if (this.checked) {
          var user = $(this).val();
          if ($('.tag-container:contains(' + user + ')').length === 0) {
            $('.tag-container').append('<div class="tag mt-3 mb-3"><span>' + user + '</span><span class="cross">&#10005;</span></div>');
          }
        } else {
          var user = $(this).val();
          $('.tag:contains(' + user + ')').remove();
        }

        updateParentCheckboxState();
      });

      // Add tag for all child checkboxes when parent checkbox is checked
      $('#parent-checkbox').on('change', function () {
        $('.child-checkbox').prop('checked', this.checked).trigger('change');
      });

      // Remove tag and uncheck checkbox when cross button is clicked
      $('.tag-container').on('click', '.cross', function (event) {
        var user = $(event.target).prev().text().trim();
        $(event.target).parent().remove();
        $('.child-checkbox[value="' + user + '"]').prop('checked', false);
        updateParentCheckboxState();
      });

      function updateParentCheckboxState() {
        var allChecked = $('.child-checkbox').length === $('.child-checkbox:checked').length;
        $('#parent-checkbox').prop('checked', allChecked);
      }
    });


  </script>
</body>

</html>


</body>

</html>